(this.webpackJsonphack2=this.webpackJsonphack2||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(3),i=n.n(o),s=(n(12),n(13),n(4)),d=n(5),c=n(7),l=n(6),u=n(0);function b(e){var t=e.handleReset,n=e.qs_ranking,r=e.best_qs_ranking,a=e.step;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{id:"title",children:"Merging School"}),Object(u.jsxs)("div",{className:"btn-groups",children:[Object(u.jsxs)("div",{className:"qs-ranking",id:"general-qs-ranking",children:["QS: ",Object(u.jsx)("p",{id:"general-qs-ranking-value",children:n})]}),Object(u.jsxs)("div",{className:"qs-ranking",id:"general-step",children:["Step: ",Object(u.jsx)("p",{id:"general-step-value",children:a})]}),Object(u.jsxs)("div",{className:"qs-ranking",id:"best-qs-ranking",children:["Best: ",Object(u.jsx)("p",{id:"best-qs-ranking-value",children:r})]}),Object(u.jsx)("div",{className:"button",id:"reset-button",onClick:t,children:"New Game"})]})]})}function v(e){var t=e.grid_value,n=e.row_idx,r=e.column_idx,a=e.grid_flag,o="grid-".concat(n,"-").concat(r),i="value-".concat(n,"-").concat(r),s="grid",d=0===t?"":t;return d&&(s+=" level-".concat(d)),a&&(s+=" school-fade-in"),Object(u.jsx)("td",{children:Object(u.jsx)("div",{className:s,id:o,children:Object(u.jsx)("div",{className:"school-name",id:i,children:{"":"",2:"NCTU",4:"NYMU",8:"NTU",16:"UCSD",32:"UBC",64:"CUHK",128:"UCLA",256:"NYU",512:"UCB",1024:"HKUST",2048:"UTokyo",4096:"Columbia",8192:"Yale",16384:"Cambridge",32768:"Stanford",65536:"MIT"}[d]})})})}function f(e){var t=e.row_vector,n=e.row_idx,r=e.row_flag;return Object(u.jsx)("tr",{children:t.map((function(e,t){return Object(u.jsx)(v,{grid_value:e,row_idx:n,column_idx:t,grid_flag:r[t]},t)}))})}function g(e){var t=e.board,n=e.handleReset,r=e.gameover,a=e.win,o=e.boardflag,i="board",s="info";r&&(i+=" game-over-board",s+=" game-over-wrapper end-fade-in");var d="No funding this year QAO";return a&&(d="You should study a PhD!"),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("table",{className:i,id:"board-full",children:Object(u.jsx)("tbody",{children:t.map((function(e,t){return Object(u.jsx)(f,{row_vector:e,row_idx:t,row_flag:o[t]},t)}))})}),Object(u.jsxs)("div",{className:s,id:"game-over-info",children:[Object(u.jsx)("span",{id:"game-over-text",children:d}),Object(u.jsx)("div",{className:"button",id:"game-over-button",onClick:n,children:"Try again"})]})]})}n(15);for(var h=1,m="Kaminyou".split(""),j=0;j<m.length;j++)h*=m[j].charCodeAt(0),h%=4294967295;var p=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).prng=function(e,t,n){var r=e+t;return(r=3042594569^(r=(r=(r=(r=3345072700^(r=r+2127912214+(r<<12))^r>>19)+374761393+(r<<5))+3550635116^r<<9)+4251993797+(r<<3))^r>>16)<0&&(r=4294967295+r),r%n},r.initializeBoard=function(){var e=r.initializeBoardFlag(),t=r.putGridRandom([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],e,!0);t=r.putGridRandom(t.board,t.boardflag,!0),r.setState({board:t.board,qs_ranking:32768,gameover:!1,step:0,win:!1,boardflag:t.boardflag})},r.getEmptyGrid=function(e){for(var t=[],n=0;n<4;n++)for(var r=0;r<4;r++)0===e[n][r]&&t.push([n,r]);return t},r.putGridRandom=function(e,t,n){var a=r.getEmptyGrid(e),o=r.prng(r.state.seed,r.state.step,a.length);n&&(o=r.prng(r.state.seed,0,a.length));var i=a[o];return e[i[0]][i[1]]=2,t[i[0]][i[1]]=1,{board:e,boardflag:t}},r.justifyMove=function(e,t){return JSON.stringify(e)!==JSON.stringify(t)},r.moveGrid=function(e){if(!r.state.gameover)if("up"===e){var t=r.moveUp(r.state.board);r.checkAndUpdateAfterMove(t)}else if("right"===e){var n=r.moveRight(r.state.board);r.checkAndUpdateAfterMove(n)}else if("down"===e){var a=r.moveDown(r.state.board);r.checkAndUpdateAfterMove(a)}else if("left"===e){var o=r.moveLeft(r.state.board);r.checkAndUpdateAfterMove(o)}},r.checkAndUpdateAfterMove=function(e){if(r.justifyMove(r.state.board,e.board)){var t=r.initializeBoardFlag(),n=r.putGridRandom(e.board,t,!1),a=r.state.qs_ranking,o=r.state.step;a-=e.combination,r.setState({board:n.board,qs_ranking:a,step:o+1,boardflag:n.boardflag}),a<r.state.best_qs_ranking&&r.setState({best_qs_ranking:a}),r.checkGameover(n.board)&&r.setState({gameover:!0})}},r.moveUp=function(e){var t=r.rotateClockwise(e),n=r.moveRight(t);return{board:r.rotateCounterClockwise(n.board),combination:n.combination}},r.moveRight=function(e){for(var t=[],n=0,r=0;r<e.length;r++){for(var a=[],o=0;o<e[r].length;o++){var i=e[r][o];0===i?a.unshift(i):a.push(i)}t.push(a)}for(var s=0;s<t.length;s++)if(t[s][0]!==t[s][1]||0===t[s][0]||t[s][2]!==t[s][3]||0===t[s][2])for(var d=t[s].length-1;d>0;d--)t[s][d]>0&&t[s][d]===t[s][d-1]?(t[s][d]=2*t[s][d],t[s][d-1]=0,n+=1):0===t[s][d]&&t[s][d-1]>0&&(t[s][d]=t[s][d-1],t[s][d-1]=0);else t[s][3]=2*t[s][3],t[s][2]=2*t[s][1],t[s][1]=0,t[s][0]=0,n+=2;return{board:t,combination:n}},r.moveDown=function(e){var t=r.rotateCounterClockwise(e),n=r.moveRight(t);return{board:r.rotateClockwise(n.board),combination:n.combination}},r.moveLeft=function(e){var t=r.rotateClockwise(r.rotateClockwise(e)),n=r.moveRight(t);return{board:r.rotateCounterClockwise(r.rotateCounterClockwise(n.board)),combination:n.combination}},r.rotateClockwise=function(e){for(var t=[],n=function(n){var r=e.map((function(e){return e[n]})).reverse();t.push(r)},r=0;r<e[0].length;r++)n(r);return t},r.rotateCounterClockwise=function(e){for(var t=[],n=function(n){var r=e.map((function(e){return e[n]}));t.push(r)},r=e[0].length-1;r>=0;r--)n(r);return t},r.checkGameover=function(e){var t=![r.justifyMove(e,r.moveUp(e).board),r.justifyMove(e,r.moveRight(e).board),r.justifyMove(e,r.moveDown(e).board),r.justifyMove(e,r.moveLeft(e).board)].includes(!0);return r.checkWin(e)&&(t=!0),t},r.checkWin=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)if(65536===e[t][n])return r.setState({win:!0}),!0;return!1},r.setBadEnd=function(){r.setState({board:[[2,4,2,4],[4,2,4,2],[2,4,2,128],[4,128,2,2]]})},r.setGoodEnd=function(){r.setState({board:[[2,2,4,8],[128,64,32,16],[256,512,1024,2048],[32768,16384,8192,4096]]})},r.initializeBoardFlag=function(){return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]},r.state={board:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,2,0,0]],boardflag:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,1,0,0]],qs_ranking:32768,best_qs_ranking:32768,gameover:!1,step:0,win:!1,seed:h},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){document.querySelector("body").addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"handleKeyDown",value:function(e){e.preventDefault(),37===e.keyCode?this.moveGrid("left"):38===e.keyCode?this.moveGrid("up"):39===e.keyCode?this.moveGrid("right"):40===e.keyCode&&this.moveGrid("down")}},{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b,{handleReset:this.initializeBoard,qs_ranking:this.state.qs_ranking,best_qs_ranking:this.state.best_qs_ranking,step:this.state.step}),Object(u.jsx)(g,{className:"wrapper",board:this.state.board,handleReset:this.initializeBoard,gameover:this.state.gameover,win:this.state.win,boardflag:this.state.boardflag}),Object(u.jsxs)("div",{className:"btn-groups",children:[Object(u.jsx)("div",{className:"btn-useful",id:"badend-btn",onClick:this.setBadEnd,children:"BadEnd"}),Object(u.jsx)("div",{className:"btn-useful",id:"goodend-btn",onClick:this.setGoodEnd,children:"GoodEnd"})]})]})}}]),n}(r.Component);var k=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(p,{})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),x()}},[[16,1,2]]]);
//# sourceMappingURL=main.2669dd37.chunk.js.map